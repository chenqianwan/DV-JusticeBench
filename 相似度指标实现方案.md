# 相似度指标实现方案

## 实现方法表格

| 指标名称 | 实现方法 | 技术要点 |
|---------|---------|---------|
| **1. 法律引用相关性** | 使用正则表达式提取法律条文引用（如《XX法》第X条），计算AI和法官判决中引用的法律条文的交集比例 | 正则匹配：`《[^》]+》`、`第[一二三四五六七八九十\d]+条`，计算Jaccard相似度 |
| **2. 法律推理相似性** | 提取推理关键词（如"因为"、"所以"、"因此"、"依据"等）和推理结构，使用语义相似度计算 | 提取推理连接词、因果关系词，使用词向量或TF-IDF计算语义相似度 |
| **3. 价值判断相似性** | 提取价值判断相关词汇（如"公平"、"合理"、"适当"、"不当"、"过错"等），比较价值倾向 | 构建价值判断词典，提取相关词汇，计算共同价值判断词汇的比例 |
| **4. 事实关键词相似度** | 提取案例中的事实描述关键词（人名、地名、时间、金额、行为等），计算事实要素的匹配度 | 使用NER识别实体，提取数字、时间、行为动词，计算事实要素的Jaccard相似度 |
| **5. 结论相似性** | 提取判决结论部分（通常在"判决如下"、"裁定如下"之后），比较结论的语义相似度 | 定位结论段落，提取结论关键词，使用文本相似度算法（如余弦相似度）计算 |

## 实施步骤

1. **法律引用相关性**：改进现有的 `_calculate_legal_basis_similarity` 方法，更精确地提取法律条文
2. **法律推理相似性**：新增方法，提取推理关键词和结构，计算语义相似度
3. **价值判断相似性**：新增方法，构建价值判断词典，提取并比较价值词汇
4. **事实关键词相似度**：新增方法，提取事实要素（实体、数字、时间等），计算匹配度
5. **结论相似性**：新增方法，定位结论段落，提取并比较结论内容

## 输出格式

所有指标返回 0-1 之间的相似度分数，最终在 `calculate_metrics` 方法中统一返回。


