# 法律AI研究平台 - API成本估算

## DeepSeek API 定价参考

根据 DeepSeek 官方定价（2024年数据）：
- **deepseek-chat 模型**：
  - 输入（Input）：约 $0.14 / 百万token
  - 输出（Output）：约 $0.56 / 百万token

**注意**：实际定价可能有所变化，建议查看 [DeepSeek 官网](https://www.deepseek.com) 获取最新价格。

---

## 单次API调用分析

### 1. 分析单个问题（analyze_case）

**输入Token估算**：
- System提示：~50 tokens
- 案例文本：假设平均 2000 字符 ≈ 1500 tokens（中文1字符≈0.75 token）
- 问题文本：假设平均 50 字符 ≈ 40 tokens
- **总输入约：1590 tokens**

**输出Token估算**：
- 分析结果：max_tokens=3000，实际输出约 2000 tokens
- **总输出约：2000 tokens**

**单次分析成本**：
- 输入：1590 / 1,000,000 × $0.14 = $0.00022
- 输出：2000 / 1,000,000 × $0.56 = $0.00112
- **单次总计：约 $0.00134（约 ¥0.0096，不到1分钱）**

### 2. 对比分析（compare_decisions，如果有法官判决）

**输入Token估算**：
- System提示：~50 tokens
- AI判决：约 2000 tokens
- 法官判决：假设平均 1500 tokens
- **总输入约：3550 tokens**

**输出Token估算**：
- 对比结果：max_tokens=2500，实际输出约 1800 tokens
- **总输出约：1800 tokens**

**单次对比成本**：
- 输入：3550 / 1,000,000 × $0.14 = $0.00050
- 输出：1800 / 1,000,000 × $0.56 = $0.00101
- **单次总计：约 $0.00151（约 ¥0.0108，约1分钱）**

---

## 500个问题的成本估算

### 场景一：仅分析问题（无法官判决对比）

- **单次分析成本**：$0.00134
- **500次分析**：500 × $0.00134 = **$0.67**
- **约合人民币**：¥4.8（按汇率7.2计算）

### 场景二：分析问题 + 对比法官判决（假设50%有法官判决）

- **分析成本**：500 × $0.00134 = $0.67
- **对比成本**：250 × $0.00151 = $0.38
- **总成本**：**$1.05**
- **约合人民币**：¥7.6

### 场景三：完整流程（生成问题 + 分析 + 对比）

假设每个案例生成10个问题，共50个案例：

- **生成问题成本**（50次）：
  - 输入：约 2000 tokens/次
  - 输出：约 500 tokens/次
  - 单次：$0.00028 + $0.00028 = $0.00056
  - 50次：$0.028

- **分析问题成本**（500次）：$0.67

- **对比成本**（250次）：$0.38

- **总成本**：**$1.08**
- **约合人民币**：¥7.8

---

## 成本优化建议

1. **批量处理**：如果可能，批量处理多个问题可以稍微降低单次调用成本

2. **调整max_tokens**：
   - 如果不需要完整分析，可以降低 max_tokens
   - 当前设置：analyze_case=3000，可考虑降至2000

3. **缓存结果**：相同案例的相同问题可以缓存，避免重复调用

4. **选择性对比**：只在需要时才进行法官判决对比

---

## 实际使用建议

### 预算规划

- **小规模测试**（50个问题）：约 ¥0.5 - ¥1
- **中等规模**（500个问题）：约 ¥5 - ¥8
- **大规模使用**（5000个问题）：约 ¥50 - ¥80

### 监控成本

建议在使用过程中：
1. 定期检查API使用量
2. 在DeepSeek控制台查看实际token消耗
3. 根据实际使用情况调整预算

---

## 注意事项

1. **实际成本可能因以下因素变化**：
   - 案例文本长度（影响输入token）
   - 分析结果长度（影响输出token）
   - API定价调整
   - 汇率波动

2. **Token计算**：
   - 中文1字符 ≈ 0.75-1 token
   - 英文1单词 ≈ 1.3 tokens
   - 实际token数可能因模型而异

3. **建议**：
   - 先进行小规模测试（10-20个问题）
   - 记录实际token消耗
   - 根据实际数据调整估算

---

## 快速参考表

| 问题数量 | 仅分析 | 分析+对比(50%) | 完整流程 |
|---------|--------|---------------|---------|
| 50个    | ¥0.48  | ¥0.76        | ¥0.78   |
| 100个   | ¥0.96  | ¥1.52        | ¥1.56   |
| 500个   | ¥4.80  | ¥7.60        | ¥7.80   |
| 1000个  | ¥9.60  | ¥15.20       | ¥15.60  |

*注：价格为估算值，实际可能有所差异*


