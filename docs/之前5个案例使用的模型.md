# 之前5个案例使用的模型

## 根据代码分析

### API提供商
- **默认配置**：`API_PROVIDER = 'deepseek'`（在 `config.py` 中）
- **实际使用**：**DeepSeek API**

### 使用的模型

根据 `test_5_cases_with_new_rubric.py` 和 `utils/deepseek_api.py` 的代码：

| 处理步骤 | 使用的模型 | 模式 | 说明 |
|---------|----------|------|------|
| **1. 脱敏处理** | `deepseek-chat` | 普通模式 | 通过 `DataMaskerAPI` 调用 |
| **2. 生成问题** | `deepseek-chat` | 普通模式 | `ai_api.generate_questions()` |
| **3. 生成AI回答** | `deepseek-reasoner` | **思考模式** | `ai_api.analyze_case(..., use_thinking=True)` |
| **4. 评估回答** | `deepseek-reasoner` | **思考模式** | `evaluator.evaluate_answer(..., use_thinking=True)` |

### 模型对应关系

根据代码中的逻辑（`utils/deepseek_api.py` 第95行）：
```python
model = 'deepseek-reasoner' if use_thinking else 'deepseek-chat'
```

- **`deepseek-chat`**：普通聊天模型
- **`deepseek-reasoner`**：推理模型（思考模式）

### 与价格系列的对应关系

根据您提供的价格信息：
- **DeepSeek-V3系列**：2元/8元（输入/输出）- 标准模型
- **DeepSeek-R1系列**：4元/16元（输入/输出）- 推理模型

**推测对应关系**：
- `deepseek-chat` → **DeepSeek-V3系列**（标准模型，价格较低）
- `deepseek-reasoner` → **DeepSeek-R1系列**（推理模型，价格较高）

---

## 实际成本分析

### 基于实际使用的模型

假设：
- 脱敏和生成问题使用 `deepseek-chat`（V3系列）：2元/8元
- AI回答和评估使用 `deepseek-reasoner`（R1系列）：4元/16元

**单个案例Token消耗**：
- 输入：80,300 tokens
- 输出（普通模式）：27,815 tokens
- 输出（思考模式）：42,815 tokens

**成本计算**：

1. **脱敏处理**（使用V3）：
   - 输入：300 tokens × 2元 / 1,000,000 = ¥0.0006
   - 输出：15 tokens × 8元 / 1,000,000 = ¥0.0001
   - 小计：¥0.0007

2. **生成问题**（使用V3）：
   - 输入：5,000 tokens × 2元 / 1,000,000 = ¥0.01
   - 输出：300 tokens × 8元 / 1,000,000 = ¥0.0024
   - 小计：¥0.0124

3. **生成AI回答（5次）**（使用R1）：
   - 输入：6,000 tokens × 5 × 4元 / 1,000,000 = ¥0.12
   - 输出：4,500 tokens × 5 × 16元 / 1,000,000 = ¥0.36
   - 小计：¥0.48

4. **评估回答（5次）**（使用R1）：
   - 输入：9,000 tokens × 5 × 4元 / 1,000,000 = ¥0.18
   - 输出：4,000 tokens × 5 × 16元 / 1,000,000 = ¥0.32
   - 小计：¥0.50

**单个案例总成本**：¥0.0007 + ¥0.0124 + ¥0.48 + ¥0.50 = **¥0.9931** ≈ **¥1.00**

**100个案例总成本**：¥1.00 × 100 = **¥100**

---

## 如果全部使用V3系列

如果所有步骤都使用 `deepseek-chat`（V3系列，2元/8元）：

**单个案例成本**：
- 输入：80,300 tokens × 2元 / 1,000,000 = ¥0.1606
- 输出：27,815 tokens × 8元 / 1,000,000 = ¥0.2225
- **总成本**：¥0.3831

**100个案例总成本**：¥0.3831 × 100 = **¥38.31**

---

## 如果全部使用R1系列

如果所有步骤都使用 `deepseek-reasoner`（R1系列，4元/16元）：

**单个案例成本**：
- 输入：80,300 tokens × 4元 / 1,000,000 = ¥0.3212
- 输出：42,815 tokens × 16元 / 1,000,000 = ¥0.6850
- **总成本**：¥1.0062

**100个案例总成本**：¥1.0062 × 100 = **¥100.62**

---

## 总结

### 之前5个案例使用的模型

1. **API提供商**：**DeepSeek**
2. **脱敏和生成问题**：`deepseek-chat`（推测为V3系列）
3. **AI回答和评估**：`deepseek-reasoner`（推测为R1系列，思考模式）

### 实际成本估算

- **混合使用（V3 + R1）**：约 **¥100** / 100个案例
- **全部使用V3**：约 **¥38.31** / 100个案例
- **全部使用R1**：约 **¥100.62** / 100个案例

### 建议

如果要降低成本，可以考虑：
- 脱敏和生成问题继续使用V3（价格低）
- AI回答和评估也使用V3（如果不需要思考模式）
- 或者只在需要深度推理时使用R1

---

## 数据来源

- `config.py`：API_PROVIDER = 'deepseek'
- `test_5_cases_with_new_rubric.py`：实际运行的脚本
- `utils/deepseek_api.py`：模型选择逻辑
- 您提供的DeepSeek价格对比表格

**最后更新时间**：2025年1月5日


