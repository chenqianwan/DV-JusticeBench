# 法律AI研究平台 - 启动说明

## 🚀 快速启动

### 方式一：运行打包后的程序（推荐）

1. **进入打包目录**
   ```bash
   cd dist/法律AI研究平台
   ```

2. **运行程序**
   ```bash
   ./法律AI研究平台
   ```

3. **首次运行会提示输入API密钥**
   - 输入您的 DeepSeek API 密钥（输入会被隐藏）
   - 或者提前设置环境变量：`export DEEPSEEK_API_KEY=your_api_key_here`

4. **访问应用**
   - 程序启动后，打开浏览器访问：`http://localhost:5001`
   - 如果端口被占用，程序会提示使用其他端口

---

### 方式二：开发模式运行

1. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

2. **运行程序**
   ```bash
   python run.py
   ```
   或
   ```bash
   python app.py
   ```

3. **访问应用**
   - 打开浏览器访问：`http://localhost:5001`

---

## 📝 使用步骤

### 1. 添加案例
- 在"案例管理"标签页填写案例信息
- 案例标题和内容为必填项
- 法官判决为可选项（用于后续对比分析）

### 2. AI分析
- 在"AI分析"标签页选择要分析的案例
- 可以生成测试问题，或直接输入问题进行整体分析
- 点击"开始分析"等待结果

### 3. 查看结果
- 在"分析结果"标签页查看所有分析记录
- 可以导出Excel文件进行进一步分析

---

## ⚙️ 配置说明

### API密钥配置

**方式一：运行时输入**
- 程序启动时会提示输入，输入会被隐藏保护

**方式二：环境变量（推荐）**
```bash
export DEEPSEEK_API_KEY=your_api_key_here
```

**方式三：创建 .env 文件**
```
DEEPSEEK_API_KEY=your_api_key_here
```

---

## 🔧 常见问题

### ⚠️ macOS 安全提示 - "应用已损坏"错误

如果双击运行时出现 **"应用已损坏，无法打开"** 的错误，这是 macOS 的 Gatekeeper 安全机制导致的。解决方法：

**方法一：移除隔离属性（推荐）**
```bash
cd dist/法律AI研究平台
xattr -cr 法律AI研究平台
```
然后再次双击运行。

**方法二：使用终端运行（最可靠）**
```bash
cd dist/法律AI研究平台
./法律AI研究平台
```

**方法三：在系统设置中允许**
1. 打开 **系统设置** > **隐私与安全性**
2. 在"安全性"部分，找到被阻止的应用提示
3. 点击 **"仍要打开"** 或 **"允许"**

**方法四：创建启动脚本**
创建一个 `启动.sh` 文件：
```bash
#!/bin/bash
cd "$(dirname "$0")"
xattr -cr 法律AI研究平台
./法律AI研究平台
```
然后执行：`chmod +x 启动.sh`，双击运行脚本。

---

### 端口被占用
- 程序会自动尝试其他端口（5002, 5003...）
- 查看终端输出确认实际使用的端口

### 无法访问
- 确认程序已成功启动（查看终端输出）
- 检查防火墙设置
- 确认端口号正确

### API调用失败
- 检查API密钥是否正确
- 确认网络连接正常
- 查看终端错误信息

### 双击运行没有提示输入API密钥
- 双击运行时可能没有控制台窗口
- 建议使用终端运行：`./法律AI研究平台`
- 或者提前设置环境变量：`export DEEPSEEK_API_KEY=your_key`
- 或者创建 `config.json` 文件：
```json
{
  "DEEPSEEK_API_KEY": "your_api_key_here"
}
```

---

## 📂 数据存储

- **案例数据**: `data/cases/cases.json`
- **分析结果**: `data/results/` 目录下的Excel文件

---

## 💡 提示

- 首次使用建议先添加一个测试案例
- 生成问题时建议数量设置为5-10个
- 导出功能支持批量导出所有分析结果

